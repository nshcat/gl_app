# Version requirement and project info
cmake_minimum_required(VERSION 3.1.3)
project(gl_app)


# Search for OpenGL
find_package(OpenGL REQUIRED)

# Disable glfw examples and tests
set(GLFW_BUILD_EXAMPLES OFF CACHE BOOL "bla")
set(GLFW_BUILD_TESTS OFF CACHE BOOL "bla")
set(GLFW_BUILD_DOCS OFF CACHE BOOL "bla")
set(GLFW_INSTALL OFF CACHE BOOL "bla")

# Add openGL support libraries
add_subdirectory(glfw)
add_subdirectory(glxw)


# Source files
file(GLOB SOURCE_FILES src/*.cxx)

# Define target as executable
add_executable(gl_app ${SOURCE_FILES})


# Own headers
target_include_directories(gl_app PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include)

# GLFW headers
target_include_directories(gl_app PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/glfw/include)

# GLM headers
target_include_directories(gl_app PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/glm)

# GLXW headers. They will be generated by cmake and are thus placed in the binary dir.
target_include_directories(gl_app PRIVATE ${CMAKE_BINARY_DIR}/glxw/include)

# IF THIS DOESNT WORK, ADD "glfw"
target_link_libraries(gl_app glxw ${GLFW_LIBRARIES} ${GLXW_LIBRARY} ${OPENGL_LIBRARY})


# Require support for at least C++14.
set_property(TARGET gl_app PROPERTY CXX_STANDARD 14)
set_property(TARGET gl_app PROPERTY CXX_STANDARD_REQUIRED ON)
